---
title: 算法思维之递归
date: 2020-06-12
description: 深入理解递归思想。
tags: ['算法与数据结构']
layout: blog-post
---

## 什么是递归
- 递归是一种编程技巧，一种解决问题的思维方式。
- 递归的基本思想是某个函数直接或者间接地调用自身，这样就把原问题的求解转换为许多性质相同但是规模更小的子问题。我们只需要关注`如何把原问题划分成符合条件的子问题`，而不需要去研究这个子问题是如何被解决的。
- 递归和枚举的区别在于：枚举是横向地把问题划分，然后依次求解子问题，而递归是把问题逐级分解，是纵向的拆分。


### 对递归的理解
1. 如何给一堆数字排序？ 答：分成两半，先排左半边再排右半边，最后合并就行了，至于怎么排左边和右边，请重新阅读这句话。
2. 孙悟空身上有多少根毛？ 答：一根毛加剩下的毛。
3. 你今年几岁？ 答：去年的岁数加一岁，1999年我出生。

### 递归的特征
递归代码最重要的两个特征：`结束条件和自我调用`。**自我调用是在解决子问题，而结束条件定义了最简子问题的答案。**

### 递归和数学归纳法的联系
- 递归代码的精髓在于调用自己去解决规模更小的子问题，直到到达结束条件；
- 而数学归纳法之所以有用，就在于不断把我们的猜测向上加一，扩大结论的规模，没有结束条件，从而把结论延伸到无穷无尽，也就完成了猜测正确性的证明。


## 为什么要写递归
- 第一，为了训练逆向思考的能力。递推的思维是正常人的思维，总是看着眼前的问题思考对策，解决问题是将来时；递归的思维，逼迫我们倒着思考，看到问题的尽头，把解决问题的过程看做过去时。
- 第二，练习分析问题的结构，当问题可以被分解成相同结构的小问题时，你能敏锐发现这个特点，进而高效解决问题。
- 第三，跳出细节，从整体上看问题。

### 归并排序
```javascript
function sort(arr, low, high) {
  if (low >= high) return
  const mid = low + (high - low) / 2
  sort(arr, low, mid)         // 排序左半边
  sort(arr, mid + 1, high)    // 排序右半边
  merge(arr, low, mid, high)  // 合并两边
}
```

### 计算链表的长度
```javascript
/* 典型的递推遍历框架，需要额外空间 O(1) */
function size(head) {
  let size = 0
  for (let p = head; p != null; p = p.next) size++
  return size
}
/* 我偏要递归，万物皆递归，需要额外空间 O(N) */
function size(head) {
  if (head == null) return 0
  return size(head.next) + 1
}
```


## 写递归的技巧
心得是：`明白一个函数的作用并相信它能完成这个任务，千万不要试图跳进细节。`千万不要跳进这个函数里面企图探究更多细节，否则就会陷入无穷的细节无法自拔，人脑能压几个栈啊。


## 分治算法
归并排序，典型的分治算法；分治，典型的递归结构。

分治算法可以分三步走：分解 -> 解决 -> 合并。这不就是个`二叉树后序遍历`模板吗？为什么是后序遍历？因为我们分治算法的套路是`分解 -> 解决（触底） -> 合并（回溯）`啊，先左右分解，再处理合并，回溯就是在退栈，就相当于后序遍历。

1. 分解原问题为结构相同的子问题。
2. 分解到某个容易求解的边界之后，进行第归求解。
3. 将子问题的解合并成原问题的解。
